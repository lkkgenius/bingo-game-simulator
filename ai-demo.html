<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI å­¸ç¿’ç³»çµ±æ¼”ç¤º</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        h1 {
            color: #4a5568;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .demo-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: #f7fafc;
        }
        
        .demo-section h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        button {
            background: #4299e1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #3182ce;
        }
        
        .output {
            background: #1a202c;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4299e1;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .stat-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2d3748;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– AI å­¸ç¿’ç³»çµ±æ¼”ç¤º</h1>
        
        <div class="demo-section">
            <h3>1. åŸºæœ¬åŠŸèƒ½æ¸¬è©¦</h3>
            <p>æ¸¬è©¦ AI å­¸ç¿’ç³»çµ±çš„åˆå§‹åŒ–å’ŒåŸºæœ¬åŠŸèƒ½</p>
            <button onclick="testBasicFunctionality()">é‹è¡ŒåŸºæœ¬æ¸¬è©¦</button>
            <div id="basic-output" class="output" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h3>2. éŠæˆ²æ•¸æ“šå­¸ç¿’</h3>
            <p>æ¨¡æ“¬éŠæˆ²æ•¸æ“šä¸¦è§€å¯Ÿ AI ç³»çµ±çš„å­¸ç¿’éç¨‹</p>
            <button onclick="simulateGameLearning()">æ¨¡æ“¬å­¸ç¿’éç¨‹</button>
            <button onclick="showLearningStats()">é¡¯ç¤ºå­¸ç¿’çµ±è¨ˆ</button>
            <div id="learning-output" class="output" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h3>3. ç§»å‹•é æ¸¬æ¼”ç¤º</h3>
            <p>å±•ç¤º AI ç³»çµ±å¦‚ä½•é æ¸¬æœ€ä½³ç§»å‹•</p>
            <button onclick="demonstratePrediction()">é æ¸¬ç§»å‹•</button>
            <div id="prediction-output" class="output" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h3>4. é›£åº¦è‡ªé©æ‡‰</h3>
            <p>å±•ç¤ºç³»çµ±å¦‚ä½•æ ¹æ“šè¡¨ç¾èª¿æ•´é›£åº¦</p>
            <button onclick="demonstrateDifficultyAdjustment()">æ¸¬è©¦é›£åº¦èª¿æ•´</button>
            <div id="difficulty-output" class="output" style="display: none;"></div>
        </div>
        
        <div class="demo-section">
            <h3>5. å­¸ç¿’çµ±è¨ˆå„€è¡¨æ¿</h3>
            <div class="stats-grid" id="stats-dashboard">
                <!-- çµ±è¨ˆå¡ç‰‡å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
            </div>
            <button onclick="updateStatsDashboard()">æ›´æ–°çµ±è¨ˆ</button>
        </div>
        
        <div class="demo-section">
            <h3>6. æ€§èƒ½æ¸¬è©¦</h3>
            <p>æ¸¬è©¦ AI ç³»çµ±è™•ç†å¤§é‡æ•¸æ“šçš„æ€§èƒ½</p>
            <button onclick="runPerformanceTest()">é‹è¡Œæ€§èƒ½æ¸¬è©¦</button>
            <div id="performance-output" class="output" style="display: none;"></div>
        </div>
    </div>

    <script src="aiLearningSystem.js"></script>
    <script>
        let aiSystem = null;
        
        function initializeAI() {
            if (!aiSystem) {
                aiSystem = new AILearningSystem();
                console.log('AI å­¸ç¿’ç³»çµ±å·²åˆå§‹åŒ–');
            }
            return aiSystem;
        }
        
        function testBasicFunctionality() {
            const output = document.getElementById('basic-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                
                let result = '=== AI å­¸ç¿’ç³»çµ±åŸºæœ¬åŠŸèƒ½æ¸¬è©¦ ===\n';
                result += `âœ“ ç³»çµ±åˆå§‹åŒ–æˆåŠŸ\n`;
                result += `åˆå§‹æŠ€èƒ½ç­‰ç´š: ${(ai.playerModel.skillLevel * 100).toFixed(1)}%\n`;
                result += `åˆå§‹éŠæˆ²é¢¨æ ¼: ${ai.playerModel.playStyle}\n`;
                result += `åˆå§‹é›£åº¦ç­‰ç´š: ${ai.difficultySystem.currentLevel}\n`;
                result += `é…ç½®çš„é›£åº¦ç­‰ç´š: ${ai.config.difficultyLevels.join(', ')}\n`;
                result += `å­¸ç¿’ç‡: ${ai.config.learningRate}\n`;
                result += `æœ€å¤§æ­·å²è¨˜éŒ„: ${ai.config.maxHistorySize}\n`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        function simulateGameLearning() {
            const output = document.getElementById('learning-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                
                let result = '=== æ¨¡æ“¬éŠæˆ²å­¸ç¿’éç¨‹ ===\n';
                
                // æ¨¡æ“¬5å ´éŠæˆ²
                for (let gameNum = 1; gameNum <= 5; gameNum++) {
                    const mockGameData = {
                        board: Array(5).fill().map(() => Array(5).fill(Math.floor(Math.random() * 3))),
                        playerMoves: Array(4).fill().map((_, idx) => ({
                            row: Math.floor(Math.random() * 5),
                            col: Math.floor(Math.random() * 5),
                            round: idx + 1
                        })),
                        computerMoves: Array(4).fill().map((_, idx) => ({
                            row: Math.floor(Math.random() * 5),
                            col: Math.floor(Math.random() * 5),
                            round: idx + 1
                        })),
                        finalScore: Math.floor(Math.random() * 8) + 1,
                        completedLines: [],
                        gameOutcome: ['poor', 'average', 'good', 'excellent'][Math.floor(Math.random() * 4)]
                    };
                    
                    ai.recordGameData(mockGameData);
                    
                    result += `éŠæˆ² ${gameNum}:\n`;
                    result += `  åˆ†æ•¸: ${mockGameData.finalScore}\n`;
                    result += `  çµæœ: ${mockGameData.gameOutcome}\n`;
                    result += `  æŠ€èƒ½ç­‰ç´š: ${(ai.playerModel.skillLevel * 100).toFixed(1)}%\n`;
                    result += `  éŠæˆ²é¢¨æ ¼: ${ai.playerModel.playStyle}\n`;
                    result += `  é›£åº¦ç­‰ç´š: ${ai.difficultySystem.currentLevel}\n\n`;
                }
                
                result += `å­¸ç¿’å®Œæˆï¼ç¸½å…±è™•ç†äº† ${ai.gameHistory.length} å ´éŠæˆ²ã€‚`;
                
                output.textContent = result;
                updateStatsDashboard();
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        function showLearningStats() {
            const output = document.getElementById('learning-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                const stats = ai.getLearningStats();
                
                let result = '=== å­¸ç¿’çµ±è¨ˆä¿¡æ¯ ===\n';
                result += `å·²ç©éŠæˆ²æ•¸: ${stats.gamesPlayed}\n`;
                result += `ç•¶å‰æŠ€èƒ½ç­‰ç´š: ${(stats.currentSkillLevel * 100).toFixed(1)}%\n`;
                result += `éŠæˆ²é¢¨æ ¼: ${stats.playStyle}\n`;
                result += `é›£åº¦ç­‰ç´š: ${stats.difficultyLevel}\n`;
                result += `é©æ‡‰æ¬¡æ•¸: ${stats.adaptationCount}\n`;
                result += `å¹³å‡è¡¨ç¾: ${(stats.averagePerformance * 100).toFixed(1)}%\n`;
                result += `å­¸ç¿’é€²åº¦: ${stats.learningProgress.trend} (${(stats.learningProgress.improvement * 100).toFixed(1)}%)\n`;
                result += `å€‹æ€§åŒ–ç­–ç•¥æ•¸: ${stats.personalizedStrategies}\n`;
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        function demonstratePrediction() {
            const output = document.getElementById('prediction-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                
                // å‰µå»ºæ¸¬è©¦æ£‹ç›¤
                const testBoard = [
                    [1, 2, 0, 0, 0],
                    [0, 1, 0, 2, 0],
                    [0, 0, 0, 0, 0],
                    [2, 0, 0, 1, 0],
                    [0, 0, 0, 0, 0]
                ];
                
                const gameContext = {
                    currentRound: 3,
                    maxRounds: 8,
                    playerMoves: 2,
                    computerMoves: 2,
                    completedLines: 0,
                    gamePhase: 'player-turn'
                };
                
                const prediction = ai.predictBestMove(testBoard, gameContext);
                
                let result = '=== ç§»å‹•é æ¸¬æ¼”ç¤º ===\n';
                result += 'æ¸¬è©¦æ£‹ç›¤ç‹€æ…‹:\n';
                for (let row = 0; row < 5; row++) {
                    result += testBoard[row].map(cell => 
                        cell === 0 ? 'Â·' : cell === 1 ? 'â—‹' : 'â—'
                    ).join(' ') + '\n';
                }
                result += '\n';
                
                if (prediction.move) {
                    result += `é æ¸¬æœ€ä½³ç§»å‹•: (${prediction.move.row}, ${prediction.move.col})\n`;
                    result += `ä¿¡å¿ƒåº¦: ${(prediction.confidence * 100).toFixed(1)}%\n`;
                    result += `æ¨ç†èªªæ˜: ${prediction.reasoning}\n\n`;
                    
                    result += 'æ›¿ä»£é¸é …:\n';
                    prediction.alternatives.forEach((alt, index) => {
                        result += `${index + 1}. (${alt.row}, ${alt.col}) - ä¿¡å¿ƒåº¦: ${(alt.confidence * 100).toFixed(1)}%\n`;
                        result += `   æ¨ç†: ${alt.reasoning}\n`;
                    });
                } else {
                    result += 'ç„¡å¯ç”¨ç§»å‹•\n';
                }
                
                output.textContent = result;
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        function demonstrateDifficultyAdjustment() {
            const output = document.getElementById('difficulty-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                
                let result = '=== é›£åº¦è‡ªé©æ‡‰æ¼”ç¤º ===\n';
                result += `åˆå§‹é›£åº¦: ${ai.difficultySystem.currentLevel}\n\n`;
                
                // æ¨¡æ“¬é«˜è¡¨ç¾éŠæˆ²ä¾†è§¸ç™¼é›£åº¦æå‡
                result += 'æ¨¡æ“¬é«˜è¡¨ç¾éŠæˆ²...\n';
                for (let i = 0; i < 8; i++) {
                    const highPerformanceGame = {
                        board: Array(5).fill().map(() => Array(5).fill(0)),
                        playerMoves: Array(4).fill().map((_, idx) => ({ row: idx, col: idx, round: idx + 1 })),
                        computerMoves: Array(4).fill().map((_, idx) => ({ row: idx, col: idx + 1, round: idx + 1 })),
                        finalScore: 8, // é«˜åˆ†
                        completedLines: [],
                        gameOutcome: 'excellent'
                    };
                    
                    ai.recordGameData(highPerformanceGame);
                    result += `éŠæˆ² ${i + 1}: åˆ†æ•¸ 8, é›£åº¦ ${ai.difficultySystem.currentLevel}\n`;
                }
                
                result += `\næœ€çµ‚é›£åº¦: ${ai.difficultySystem.currentLevel}\n`;
                result += `é©æ‡‰æ¬¡æ•¸: ${ai.difficultySystem.adaptationCounter}\n`;
                result += `å¹³å‡è¡¨ç¾: ${(ai.calculateAveragePerformance() * 100).toFixed(1)}%\n`;
                
                output.textContent = result;
                updateStatsDashboard();
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        function updateStatsDashboard() {
            const dashboard = document.getElementById('stats-dashboard');
            
            try {
                const ai = initializeAI();
                const stats = ai.getLearningStats();
                
                const statCards = [
                    { label: 'å·²ç©éŠæˆ²', value: stats.gamesPlayed },
                    { label: 'æŠ€èƒ½ç­‰ç´š', value: `${(stats.currentSkillLevel * 100).toFixed(1)}%` },
                    { label: 'éŠæˆ²é¢¨æ ¼', value: stats.playStyle },
                    { label: 'é›£åº¦ç­‰ç´š', value: stats.difficultyLevel },
                    { label: 'é©æ‡‰æ¬¡æ•¸', value: stats.adaptationCount },
                    { label: 'å¹³å‡è¡¨ç¾', value: `${(stats.averagePerformance * 100).toFixed(1)}%` }
                ];
                
                dashboard.innerHTML = statCards.map(stat => `
                    <div class="stat-card">
                        <div class="stat-label">${stat.label}</div>
                        <div class="stat-value">${stat.value}</div>
                    </div>
                `).join('');
            } catch (error) {
                dashboard.innerHTML = `<div class="stat-card"><div class="stat-value">éŒ¯èª¤: ${error.message}</div></div>`;
            }
        }
        
        function runPerformanceTest() {
            const output = document.getElementById('performance-output');
            output.style.display = 'block';
            
            try {
                const ai = initializeAI();
                
                let result = '=== æ€§èƒ½æ¸¬è©¦ ===\n';
                result += 'æ¸¬è©¦è™•ç† 1000 å ´éŠæˆ²çš„æ€§èƒ½...\n\n';
                
                const startTime = performance.now();
                
                for (let i = 0; i < 1000; i++) {
                    const mockGame = {
                        board: Array(5).fill().map(() => Array(5).fill(Math.floor(Math.random() * 3))),
                        playerMoves: Array(4).fill().map((_, idx) => ({
                            row: Math.floor(Math.random() * 5),
                            col: Math.floor(Math.random() * 5),
                            round: idx + 1
                        })),
                        computerMoves: Array(4).fill().map((_, idx) => ({
                            row: Math.floor(Math.random() * 5),
                            col: Math.floor(Math.random() * 5),
                            round: idx + 1
                        })),
                        finalScore: Math.floor(Math.random() * 10),
                        completedLines: [],
                        gameOutcome: ['poor', 'average', 'good', 'excellent'][Math.floor(Math.random() * 4)]
                    };
                    
                    ai.recordGameData(mockGame);
                    
                    if ((i + 1) % 100 === 0) {
                        result += `è™•ç†äº† ${i + 1} å ´éŠæˆ²...\n`;
                        output.textContent = result;
                    }
                }
                
                const endTime = performance.now();
                const processingTime = endTime - startTime;
                
                result += `\næ€§èƒ½æ¸¬è©¦å®Œæˆï¼\n`;
                result += `ç¸½è™•ç†æ™‚é–“: ${processingTime.toFixed(2)}ms\n`;
                result += `å¹³å‡æ¯å ´éŠæˆ²: ${(processingTime / 1000).toFixed(3)}ms\n`;
                result += `è™•ç†é€Ÿåº¦: ${(1000 / (processingTime / 1000)).toFixed(0)} å ´/ç§’\n`;
                result += `æœ€çµ‚éŠæˆ²æ­·å²æ•¸é‡: ${ai.gameHistory.length}\n`;
                result += `è¨˜æ†¶é«”ä½¿ç”¨æ•ˆç‡: ${ai.gameHistory.length <= ai.config.maxHistorySize ? 'âœ“' : 'âœ—'}\n`;
                
                output.textContent = result;
                updateStatsDashboard();
            } catch (error) {
                output.textContent = `éŒ¯èª¤: ${error.message}`;
            }
        }
        
        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–çµ±è¨ˆå„€è¡¨æ¿
        window.addEventListener('load', function() {
            updateStatsDashboard();
        });
    </script>
</body>
</html>