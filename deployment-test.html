<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>部署測試 - Bingo遊戲模擬器</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            background-color: #f8f9fa;
        }
        .test-success {
            background-color: #d4edda;
            color: #155724;
        }
        .test-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .status {
            font-weight: bold;
        }
        .main-link {
            display: block;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background-color: #007bff;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-size: 18px;
        }
        .main-link:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🚀 GitHub Pages 部署測試</h1>
        <p>這個頁面用於測試所有必要的檔案是否正確載入。</p>
        
        <a href="index.html" class="main-link">🎮 前往主遊戲</a>
        
        <h2>檔案載入測試</h2>
        <div id="test-results"></div>
        
        <h2>功能測試</h2>
        <div id="function-tests"></div>
        
        <h2>部署資訊</h2>
        <div class="test-item">
            <span>GitHub Repository:</span>
            <span><a href="https://github.com/lkkgenius/bingo-game-simulator" target="_blank">lkkgenius/bingo-game-simulator</a></span>
        </div>
        <div class="test-item">
            <span>GitHub Pages URL:</span>
            <span><a href="https://lkkgenius.github.io/bingo-game-simulator" target="_blank">lkkgenius.github.io/bingo-game-simulator</a></span>
        </div>
        <div class="test-item">
            <span>部署時間:</span>
            <span id="deploy-time"></span>
        </div>
    </div>

    <script>
        // 設置部署時間
        document.getElementById('deploy-time').textContent = new Date().toLocaleString('zh-TW');
        
        // 測試檔案載入
        const filesToTest = [
            'styles.css',
            'script.js',
            'gameBoard.js',
            'gameEngine.js',
            'lineDetector.js',
            'probabilityCalculator.js',
            'probabilityCalculator.enhanced.js',
            'loading-functions.js',
            'performance-monitor.js'
        ];
        
        const testResults = document.getElementById('test-results');
        const functionTests = document.getElementById('function-tests');
        
        // 測試檔案是否存在
        filesToTest.forEach(file => {
            const testItem = document.createElement('div');
            testItem.className = 'test-item';
            
            fetch(file)
                .then(response => {
                    if (response.ok) {
                        testItem.className += ' test-success';
                        testItem.innerHTML = `
                            <span>${file}</span>
                            <span class="status">✅ 載入成功</span>
                        `;
                    } else {
                        throw new Error('File not found');
                    }
                })
                .catch(error => {
                    testItem.className += ' test-error';
                    testItem.innerHTML = `
                        <span>${file}</span>
                        <span class="status">❌ 載入失敗</span>
                    `;
                });
            
            testResults.appendChild(testItem);
        });
        
        // 測試核心功能
        setTimeout(() => {
            const functionalTests = [
                {
                    name: 'LineDetector 類別',
                    test: () => typeof LineDetector !== 'undefined'
                },
                {
                    name: 'ProbabilityCalculator 類別',
                    test: () => typeof ProbabilityCalculator !== 'undefined'
                },
                {
                    name: 'GameEngine 類別',
                    test: () => typeof GameEngine !== 'undefined'
                },
                {
                    name: 'GameBoard 類別',
                    test: () => typeof GameBoard !== 'undefined'
                },
                {
                    name: 'DOM 元素存在',
                    test: () => document.querySelector('body') !== null
                }
            ];
            
            functionalTests.forEach(test => {
                const testItem = document.createElement('div');
                testItem.className = 'test-item';
                
                try {
                    const result = test.test();
                    if (result) {
                        testItem.className += ' test-success';
                        testItem.innerHTML = `
                            <span>${test.name}</span>
                            <span class="status">✅ 正常</span>
                        `;
                    } else {
                        throw new Error('Test failed');
                    }
                } catch (error) {
                    testItem.className += ' test-error';
                    testItem.innerHTML = `
                        <span>${test.name}</span>
                        <span class="status">❌ 異常</span>
                    `;
                }
                
                functionTests.appendChild(testItem);
            });
        }, 2000);
    </script>
    
    <!-- 載入核心檔案進行測試 -->
    <script src="loading-functions.js"></script>
    <script src="performance-monitor.js"></script>
    <script src="lineDetector.js"></script>
    <script src="probabilityCalculator.js"></script>
    <script src="probabilityCalculator.enhanced.js"></script>
    <script src="gameBoard.js"></script>
    <script src="gameEngine.js"></script>
</body>
</html>