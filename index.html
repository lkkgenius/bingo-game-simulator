<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BingoéŠæˆ²æ¨¡æ“¬å™¨ - GitHub Pages Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            background-color: #f0f0f0;
        }
        .test-message {
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* æ¼”ç®—æ³•é¸æ“‡å€åŸŸæ¨£å¼ */
        .algorithm-selector {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .algorithm-selector h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }
        
        .algorithm-options {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .algorithm-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .algorithm-option:hover {
            border-color: #3498db;
            background-color: #f8f9fa;
        }
        
        .algorithm-option.selected {
            border-color: #3498db;
            background-color: #ebf5fb;
            box-shadow: 0 2px 4px rgba(52, 152, 219, 0.2);
        }
        
        .algorithm-name {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .algorithm-description {
            color: #34495e;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .algorithm-features {
            margin-top: 10px;
            padding-left: 20px;
            font-size: 0.85rem;
        }
        
        .algorithm-features li {
            margin-bottom: 5px;
            color: #34495e;
        }
        
        /* ç•¶å‰æ¼”ç®—æ³•æŒ‡ç¤ºå™¨ */
        .current-algorithm {
            background-color: #ebf5fb;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.9rem;
            color: #2980b9;
            display: inline-block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="test-message">
            <h1>ğŸ‰ GitHub Pages éƒ¨ç½²æˆåŠŸï¼</h1>
            <p>å¦‚æœæ‚¨èƒ½çœ‹åˆ°é€™å€‹é é¢ï¼Œè¡¨ç¤º GitHub Pages å·²ç¶“æ­£å¸¸å·¥ä½œäº†ï¼</p>
            <p>ç•¶å‰æ™‚é–“ï¼š<span id="current-time"></span></p>
        </div>
        
        <header>
            <h1>BingoéŠæˆ²æ¨¡æ“¬å™¨</h1>
            <p class="game-description">èˆ‡é›»è…¦é€²è¡Œ8è¼ªç¿»ç‰ŒéŠæˆ²ï¼Œç›®æ¨™æ˜¯å®Œæˆæœ€å¤šçš„é€£ç·šï¼</p>
        </header>

        <main>
            <!-- æ¼”ç®—æ³•é¸æ“‡å€åŸŸ -->
            <div class="algorithm-selector">
                <h3>é¸æ“‡æ¼”ç®—æ³•</h3>
                <div class="algorithm-options">
                    <div class="algorithm-option selected" data-algorithm="standard">
                        <div class="algorithm-name">æ¨™æº–æ¼”ç®—æ³•</div>
                        <div class="algorithm-description">åŸºæœ¬çš„æ©Ÿç‡è¨ˆç®—ï¼Œå¹³è¡¡è€ƒæ…®å„ç¨®å› ç´ </div>
                        <ul class="algorithm-features">
                            <li>åŸºæœ¬é€£ç·šæª¢æ¸¬</li>
                            <li>ç°¡å–®çš„æ©Ÿç‡è¨ˆç®—</li>
                            <li>ä¸­å¿ƒä½ç½®çå‹µ</li>
                        </ul>
                    </div>
                    <div class="algorithm-option" data-algorithm="enhanced">
                        <div class="algorithm-name">å¢å¼·æ¼”ç®—æ³•</div>
                        <div class="algorithm-description">å°ˆæ³¨æ–¼æœ€å¤§åŒ–å®Œæˆä¸‰æ¢é€£ç·šçš„æ©Ÿæœƒ</div>
                        <ul class="algorithm-features">
                            <li>äº¤å‰é»å„ªå…ˆç­–ç•¥</li>
                            <li>æ¥è¿‘å®Œæˆçš„ç·šå„ªå…ˆ</li>
                            <li>æˆ°ç•¥ä½ç½®è©•ä¼°</li>
                            <li>å¤šç·šå®Œæˆçå‹µ</li>
                        </ul>
                    </div>
                </div>
                <div class="current-algorithm">ç•¶å‰ä½¿ç”¨: <span id="current-algorithm-name">æ¨™æº–æ¼”ç®—æ³•</span></div>
            </div>

            <!-- éŠæˆ²ç‹€æ…‹é¡¯ç¤ºå€åŸŸ -->
            <div class="game-status">
                <div class="status-item">
                    <span class="label">ç•¶å‰è¼ªæ•¸:</span>
                    <span id="current-round" class="value">1</span>
                    <span class="total">/ 8</span>
                </div>
                <div class="status-item">
                    <span class="label">éŠæˆ²éšæ®µ:</span>
                    <span id="game-phase" class="value">ç©å®¶å›åˆ</span>
                </div>
                <div class="status-item">
                    <span class="label">å®Œæˆé€£ç·š:</span>
                    <span id="completed-lines" class="value">0</span>
                </div>
            </div>

            <!-- 5x5éŠæˆ²ç¶²æ ¼ -->
            <div class="game-board-container">
                <div id="game-board" class="game-board">
                    <!-- å‹•æ…‹ç”Ÿæˆ5x5ç¶²æ ¼ -->
                </div>
                <div class="board-controls">
                    <button id="start-game" class="primary-btn">é–‹å§‹éŠæˆ²</button>
                    <button id="restart-game" class="secondary-btn" disabled>é‡æ–°é–‹å§‹</button>
                    <button id="random-computer-move" class="secondary-btn">é›»è…¦éš¨æ©Ÿä¸‹æ£‹</button>
                    <div class="auto-random-container">
                        <input type="checkbox" id="auto-random-move" />
                        <label for="auto-random-move">é›»è…¦è‡ªå‹•éš¨æ©Ÿä¸‹æ£‹</label>
                    </div>
                </div>
            </div>

            <!-- éŠæˆ²æ§åˆ¶é¢æ¿ -->
            <div class="control-panel">
                <div class="suggestion-area">
                    <h3>å»ºè­°ç§»å‹•</h3>
                    <div id="suggestion-display" class="suggestion-display">
                        <span id="suggestion-text">é»æ“Šé–‹å§‹éŠæˆ²ç²å¾—å»ºè­°</span>
                    </div>
                </div>

                <div class="input-area">
                    <h3>é›»è…¦é¸æ“‡è¼¸å…¥</h3>
                    <div class="computer-input">
                        <p id="computer-turn-message">é›»è…¦å›åˆæ™‚ï¼Œè«‹ç›´æ¥é»æ“Šæ£‹ç›¤ä¸Šçš„ç©ºæ ¼å­æˆ–ä½¿ç”¨æ£‹ç›¤æ—çš„éš¨æ©Ÿä¸‹æ£‹æŒ‰éˆ•</p>
                    </div>
                </div>

                <!-- æ§åˆ¶æŒ‰é’®å·²ç§»è‡³æ£‹ç›˜æ—è¾¹ -->
                <div class="game-controls">
                </div>
            </div>

            <!-- æ“ä½œæŒ‡ç¤ºå€åŸŸ -->
            <div class="instructions">
                <h3>æ“ä½œæŒ‡ç¤º</h3>
                <div id="instruction-text" class="instruction-text">
                    é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹æ–°çš„éŠæˆ²
                </div>
            </div>
        </main>

        <!-- éŠæˆ²çµæœé¡¯ç¤ºå€åŸŸ -->
        <div id="game-results" class="game-results hidden">
            <div class="results-content">
                <h2>éŠæˆ²çµæŸï¼</h2>
                <div class="final-stats">
                    <div class="stat-item">
                        <span class="stat-label">ç¸½é€£ç·šæ•¸:</span>
                        <span id="final-lines-count" class="stat-value">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">ç©å®¶ç§»å‹•:</span>
                        <span id="player-moves-count" class="stat-value">8</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">é›»è…¦ç§»å‹•:</span>
                        <span id="computer-moves-count" class="stat-value">8</span>
                    </div>
                </div>
                <div class="completed-lines-display">
                    <h3>å®Œæˆçš„é€£ç·š:</h3>
                    <div id="lines-list" class="lines-list">
                        <!-- å‹•æ…‹é¡¯ç¤ºå®Œæˆçš„é€£ç·š -->
                    </div>
                </div>
                <button id="play-again" class="primary-btn">å†ç©ä¸€æ¬¡</button>
            </div>
        </div>
    </div>

    <!-- Global loading overlay -->
    <div id="global-loading" class="global-loading">
        <div class="loading-spinner"></div>
        <div class="loading-text">æ­£åœ¨è¼‰å…¥éŠæˆ²çµ„ä»¶...</div>
    </div>

    <!-- ç°¡å–®çš„æ¸¬è©¦è…³æœ¬ -->
    <script>
        // é¡¯ç¤ºç•¶å‰æ™‚é–“ä»¥è­‰æ˜é é¢å·²è¼‰å…¥
        document.addEventListener('DOMContentLoaded', function() {
            const timeElement = document.getElementById('current-time');
            if (timeElement) {
                timeElement.textContent = new Date().toLocaleString('zh-TW');
            }
            console.log('GitHub Pages æ¸¬è©¦é é¢å·²è¼‰å…¥æˆåŠŸï¼');
        });
    </script>
    
    <!-- åŠ è¼‰åŸºæœ¬è…³æœ¬ -->
    <script src="loading-functions.js"></script>
    <script src="performance-monitor.js"></script>
    <script src="lineDetector.js"></script>
    <script src="probabilityCalculator.js"></script>
    <script src="gameBoard.js"></script>
    <script src="script.js"></script>
    
    <!-- æ¼”ç®—æ³•é¸æ“‡å’Œåˆ‡æ›è…³æœ¬ -->
    <script>
        // ä¿å­˜åŸå§‹çš„æ©Ÿç‡è¨ˆç®—å™¨
        let StandardProbabilityCalculator = null;
        let EnhancedProbabilityCalculator = null;
        let currentAlgorithm = 'standard';
        
        // ç­‰å¾…é é¢åŠ è¼‰å®Œæˆ
        window.addEventListener('load', function() {
            console.log('æ‰€æœ‰è³‡æºå·²åŠ è¼‰');
            
            // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰å¿…è¦çš„çµ„ä»¶éƒ½å·²åŠ è¼‰
            if (typeof LineDetector === 'undefined') {
                console.error('LineDetector æœªåŠ è¼‰');
                alert('éŠæˆ²çµ„ä»¶åŠ è¼‰å¤±æ•—ï¼šLineDetector');
            } else {
                console.log('LineDetector å·²æˆåŠŸåŠ è¼‰');
            }
            
            if (typeof ProbabilityCalculator === 'undefined') {
                console.error('ProbabilityCalculator æœªåŠ è¼‰');
                alert('éŠæˆ²çµ„ä»¶åŠ è¼‰å¤±æ•—ï¼šProbabilityCalculator');
            } else {
                console.log('ProbabilityCalculator å·²æˆåŠŸåŠ è¼‰');
                // ä¿å­˜æ¨™æº–æ¼”ç®—æ³•
                StandardProbabilityCalculator = ProbabilityCalculator;
            }
            
            if (typeof GameBoard === 'undefined') {
                console.error('GameBoard æœªåŠ è¼‰');
                alert('éŠæˆ²çµ„ä»¶åŠ è¼‰å¤±æ•—ï¼šGameBoard');
            } else {
                console.log('GameBoard å·²æˆåŠŸåŠ è¼‰');
            }
            
            // åŠ è¼‰å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨
            loadEnhancedAlgorithm();
            
            // è¨­ç½®æ¼”ç®—æ³•é¸æ“‡äº‹ä»¶
            setupAlgorithmSelection();
            
            // æ·»åŠ é¡å¤–çš„é–‹å§‹éŠæˆ²æŒ‰éˆ•äº‹ä»¶ç›£è½å™¨ï¼Œä»¥é˜²åŸå§‹ç›£è½å™¨å¤±æ•—
            const startButton = document.getElementById('start-game');
            if (startButton) {
                startButton.addEventListener('click', function() {
                    console.log('é–‹å§‹éŠæˆ²æŒ‰éˆ•é»æ“Šï¼ˆå‚™ç”¨è™•ç†ç¨‹åºï¼‰');
                    if (typeof startNewGame === 'function') {
                        startNewGame();
                    } else {
                        console.error('æ‰¾ä¸åˆ° startNewGame å‡½æ•¸');
                        alert('éŠæˆ²å•Ÿå‹•å¤±æ•—ï¼šæ‰¾ä¸åˆ° startNewGame å‡½æ•¸');
                    }
                });
            }
        });
        
        /**
         * åŠ è¼‰å¢å¼·ç‰ˆæ¼”ç®—æ³•
         */
        function loadEnhancedAlgorithm() {
            console.log('æ­£åœ¨åŠ è¼‰å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨...');
            
            // åŠ è¼‰å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨
            const script = document.createElement('script');
            script.src = 'probabilityCalculator.enhanced.js';
            
            script.onload = function() {
                console.log('å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨å·²åŠ è¼‰');
                
                // æš«æ™‚ä¿å­˜å¢å¼·ç‰ˆ
                const tempEnhanced = ProbabilityCalculator;
                
                // æ¢å¾©æ¨™æº–ç‰ˆ
                ProbabilityCalculator = StandardProbabilityCalculator;
                
                // ä¿å­˜å¢å¼·ç‰ˆ
                EnhancedProbabilityCalculator = tempEnhanced;
                
                // å•Ÿç”¨æ¼”ç®—æ³•é¸æ“‡æŒ‰éˆ•
                enableAlgorithmSelection();
            };
            
            script.onerror = function() {
                console.error('åŠ è¼‰å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨å¤±æ•—');
                alert('åŠ è¼‰å¢å¼·ç‰ˆæ©Ÿç‡è¨ˆç®—å™¨å¤±æ•—ï¼Œåªèƒ½ä½¿ç”¨æ¨™æº–ç‰ˆæœ¬');
                
                // ç¦ç”¨å¢å¼·ç‰ˆé¸é …
                const enhancedOption = document.querySelector('.algorithm-option[data-algorithm="enhanced"]');
                if (enhancedOption) {
                    enhancedOption.classList.add('disabled');
                    enhancedOption.style.opacity = '0.5';
                    enhancedOption.style.cursor = 'not-allowed';
                }
            };
            
            document.body.appendChild(script);
        }
        
        /**
         * è¨­ç½®æ¼”ç®—æ³•é¸æ“‡äº‹ä»¶
         */
        function setupAlgorithmSelection() {
            const algorithmOptions = document.querySelectorAll('.algorithm-option');
            
            algorithmOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const algorithm = this.getAttribute('data-algorithm');
                    
                    // å¦‚æœå¢å¼·ç‰ˆé‚„æ²’åŠ è¼‰å®Œæˆï¼Œæˆ–è€…é»æ“Šçš„æ˜¯ç•¶å‰é¸ä¸­çš„æ¼”ç®—æ³•ï¼Œå‰‡ä¸åšä»»ä½•æ“ä½œ
                    if ((algorithm === 'enhanced' && !EnhancedProbabilityCalculator) || 
                        algorithm === currentAlgorithm) {
                        return;
                    }
                    
                    // æ›´æ–°é¸ä¸­ç‹€æ…‹
                    algorithmOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // åˆ‡æ›æ¼”ç®—æ³•
                    switchAlgorithm(algorithm);
                });
            });
            
            // åˆå§‹æ™‚ç¦ç”¨æ¼”ç®—æ³•é¸æ“‡ï¼Œç›´åˆ°å¢å¼·ç‰ˆåŠ è¼‰å®Œæˆ
            disableAlgorithmSelection();
        }
        
        /**
         * ç¦ç”¨æ¼”ç®—æ³•é¸æ“‡
         */
        function disableAlgorithmSelection() {
            const enhancedOption = document.querySelector('.algorithm-option[data-algorithm="enhanced"]');
            if (enhancedOption) {
                enhancedOption.style.opacity = '0.5';
                enhancedOption.style.cursor = 'not-allowed';
                enhancedOption.title = 'æ­£åœ¨åŠ è¼‰å¢å¼·ç‰ˆæ¼”ç®—æ³•...';
            }
        }
        
        /**
         * å•Ÿç”¨æ¼”ç®—æ³•é¸æ“‡
         */
        function enableAlgorithmSelection() {
            const enhancedOption = document.querySelector('.algorithm-option[data-algorithm="enhanced"]');
            if (enhancedOption) {
                enhancedOption.style.opacity = '1';
                enhancedOption.style.cursor = 'pointer';
                enhancedOption.title = 'é»æ“Šåˆ‡æ›åˆ°å¢å¼·ç‰ˆæ¼”ç®—æ³•';
            }
        }
        
        /**
         * åˆ‡æ›æ¼”ç®—æ³•
         * @param {string} algorithm - æ¼”ç®—æ³•åç¨± ('standard' æˆ– 'enhanced')
         */
        function switchAlgorithm(algorithm) {
            if (algorithm === currentAlgorithm) {
                return;
            }
            
            console.log(`åˆ‡æ›åˆ°${algorithm === 'standard' ? 'æ¨™æº–' : 'å¢å¼·'}ç‰ˆæ¼”ç®—æ³•`);
            
            // æ›´æ–°ç•¶å‰æ¼”ç®—æ³•
            currentAlgorithm = algorithm;
            
            // æ›´æ–°é¡¯ç¤º
            const currentAlgorithmName = document.getElementById('current-algorithm-name');
            if (currentAlgorithmName) {
                currentAlgorithmName.textContent = algorithm === 'standard' ? 'æ¨™æº–æ¼”ç®—æ³•' : 'å¢å¼·æ¼”ç®—æ³•';
            }
            
            // åˆ‡æ›æ¼”ç®—æ³•å¯¦ç¾
            if (algorithm === 'standard') {
                ProbabilityCalculator = StandardProbabilityCalculator;
            } else {
                ProbabilityCalculator = EnhancedProbabilityCalculator;
            }
            
            // å¦‚æœéŠæˆ²å·²ç¶“åˆå§‹åŒ–ï¼Œé‡æ–°åˆå§‹åŒ–ä»¥ä½¿ç”¨æ–°çš„æ¼”ç®—æ³•
            if (typeof initializeGame === 'function' && typeof gameState !== 'undefined') {
                // ä¿å­˜ç•¶å‰éŠæˆ²ç‹€æ…‹
                const wasGameStarted = gameState.gameStarted;
                const currentGamePhase = gameState.gamePhase;
                
                // é‡æ–°åˆå§‹åŒ–éŠæˆ²
                initializeGame();
                
                // å¦‚æœéŠæˆ²å·²ç¶“é–‹å§‹ï¼Œå‰‡æ›´æ–°å»ºè­°
                if (wasGameStarted && !gameState.gameEnded) {
                    // é‡æ–°é–‹å§‹éŠæˆ²
                    startNewGame();
                    
                    // é¡¯ç¤ºæç¤º
                    const instructionText = document.getElementById('instruction-text');
                    if (instructionText) {
                        instructionText.textContent = `å·²åˆ‡æ›åˆ°${algorithm === 'standard' ? 'æ¨™æº–' : 'å¢å¼·'}ç‰ˆæ¼”ç®—æ³•ï¼ŒéŠæˆ²å·²é‡æ–°é–‹å§‹`;
                        instructionText.classList.add('success');
                        
                        // 3ç§’å¾Œæ¢å¾©
                        setTimeout(() => {
                            instructionText.textContent = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹æ–°çš„éŠæˆ²';
                            instructionText.classList.remove('success');
                        }, 3000);
                    }
                } else {
                    // é¡¯ç¤ºæç¤º
                    const instructionText = document.getElementById('instruction-text');
                    if (instructionText) {
                        instructionText.textContent = `å·²åˆ‡æ›åˆ°${algorithm === 'standard' ? 'æ¨™æº–' : 'å¢å¼·'}ç‰ˆæ¼”ç®—æ³•`;
                        instructionText.classList.add('success');
                        
                        // 3ç§’å¾Œæ¢å¾©
                        setTimeout(() => {
                            instructionText.textContent = 'é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹æ–°çš„éŠæˆ²';
                            instructionText.classList.remove('success');
                        }, 3000);
                    }
                }
            }
        }
    </script>
</body>
</html>